
import base64
from cryptography.fernet import Fernet
from Crypto.Hash import SHA256
from Crypto.Protocol.KDF import PBKDF2


def decrypt(ciphertext, password):
    data = base64.b64decode(ciphertext) 
    salt, ciphertext = data[:16], data[16:]  
    key = PBKDF2(password.encode(), salt, 32, count=1000, hmac_hash_module=SHA256)  # 生成密鑰
    f = Fernet(base64.urlsafe_b64encode(key)) 
    plaintext = f.decrypt(ciphertext).decode() 
    return plaintext

ciphertext = 'iAkZMT9sfXIjD3yIpw0ldGdBQUFBQUJrVzAwb0pUTUdFbzJYeU0tTGQ4OUUzQXZhaU9HMmlOaC1PcnFqRUIzX0xtZXg0MTh1TXFNYjBLXzVBOVA3a0FaenZqOU1sNGhBcHR3Z21RTTdmN1dQUkcxZ1JaOGZLQ0E0WmVMSjZQTXN3Z252VWRtdXlaVW1fZ0pzV0xsaUM5VjR1ZHdj'
password = 'mysecretpassword'

# Decrypt
decrypted_plaintext = decrypt(ciphertext, password)
print("Decrypted data:", decrypted_plaintext)